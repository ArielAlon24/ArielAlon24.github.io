<!DOCTYPE html>
<html>
    <head>
        <title> Ariel Alon </title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="/styles.css">
        <script data-goatcounter="https://arielalon.goatcounter.com/count" src="//gc.zgo.at/count.js"></script>
    </head>
    <body>
        <nav class="navbar">
            <div class="left-nav">
                <a href="/"> Ariel Alon </a>
            </div>
            <div class="right-nav">
                <a href="https://github.com/ArielAlon24">
                    <img src="/assets/github-mark.svg" alt="Github Icon" class="icon">
                </a>
            </div>
        </nav>
        <article>
            <div class="heading">
                <h1> Typelate 0.1.0 </h1>
                <p> 11-03-2024 </p>
            </div>
            <h2>The <code>format</code> method</h2>
<p>With <a href="https://peps.python.org/pep-3101/">PEP 3101</a> came a new way to format strings, this formatting technique later established what we know as Python's f-strings (in <a href="https://peps.python.org/pep-0498/">PEP 498</a>). Shortly, it adds placeholders in strings marked with <code>{}</code> those placeholders can be later then <em>formatted</em> with values using the <code>format</code> method.</p>
<p>In the last years Python and type safety came closely related when the use of type annotations became the standard. But those template using the <code>format</code> method stayed unsafe. Which made me think why not incorporate type annotations into those template string.</p>
<h2>Introducing <code>typelate</code></h2>
<p>With the <code>typelate</code> module, you can create templates and add type annotations to the placeholders later will be replaced by actual values. Let's create a simple example</p>
<div class="code"><table class="codetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">typelate</span> <span class="kn">import</span> <span class="n">Template</span>

<span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;Hello, {name: str}!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>

<p>Here <code>template</code> is a simple template that has a <code>name</code> placeholder of type <code>str</code>. We can use it by calling the template (<code>__call__</code>) with the correct parameters.</p>
<div class="code"><table class="codetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">template</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">)</span>
<span class="go">&quot;Hello, World!&quot;</span>
</code></pre></div></td></tr></table></div>

<p>Now, let's pass an invalid type.</p>
<div class="code"><table class="codetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">template</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
<span class="go">TypeError: Incorrect type for replacement &#39;name&#39;, expected: &lt;class &#39;str&#39;&gt;.</span>
</code></pre></div></td></tr></table></div>

<h3>Advanced functionality</h3>
<ol>
<li>Format specifiers can be used with <code>typelate</code> templates as well:</li>
</ol>
<div class="code"><table class="codetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;pi is: {number: float: .2f}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="go">&quot;pi is 3.14&quot;</span>
</code></pre></div></td></tr></table></div>

<ol>
<li>You can use local or global classes and types in your template:</li>
</ol>
<div class="code"><table class="codetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">typelate</span> <span class="kn">import</span> <span class="n">Template</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;A global class: {a: A}&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>

<ol>
<li>The <code>Template</code> is wrapped around <code>str</code>, which means all <code>str</code> methods can be used on <code>Template</code>s:</li>
</ol>
<div class="code"><table class="codetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">typelate</span> <span class="kn">import</span> <span class="n">Template</span>

<span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s2">&quot;Hello, {name: str}!&quot;</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">template</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;l&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>

<h2>Installation</h2>
<p><code>typelate</code> can be installed via <code>pip</code>:</p>
<div class="code"><table class="codetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>typelate
</code></pre></div></td></tr></table></div>
        </article>
    </body>
</html>